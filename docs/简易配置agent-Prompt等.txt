
根据配置人员的，规划的任务列表如下：
1、标书配置需求识别
2、原始规格需求解析为标准规格需求
3、按标准规格需求进行产品选型
4、对选中产品进行参数配置



开始进行标书配置需求识别

 
完成标书配置需求识别，配置需求如下：
  xxx
  xxxx
 

1、标书配置需求识别
2、标书规格需求解析为标准规格需求
3、按标准规格需求进行产品选型
4、对选中产品进行参数配置

开始进行原始规格需求解析为标准规格需求
正在调用产品本体规格需求解析服务，输入...
正在调用产品本体规格需求解析服务，输入...

完成原始规格需求解析，结果如下：
 需求号： 原始规格需求    标准规格需求


1、标书配置需求识别
2、标书规格需求解析为标准规格需求
3、按标准规格需求进行产品选型
4、对选中产品进行参数配置

开始按标准规格需求进行产品选型
分解的子任务为：
--调用本体服务获取产品列表
--调用本体服务获取指定产品的规格列表
--计算每个产品的规格匹配度
--根据配置策略和规格匹配度进行产品排序
--挑选目标产品

--调用本体服务获取产品列表


--根据配置策略和规格匹配度进行产品排序
 --计算公式为：


1、标书配置需求识别
2、标书规格需求解析为标准规格需求
3、按标准规格需求进行产品选型
4、对选中产品进行参数配置

开始对选中产品进行参数配置
分解的子任务为：
--调用本体服务获取产品参数列表
--调用本体服务获取配置规则列表
--按参数依赖图,对每个参数进行配置
----进行参数进行配置，根据规格需求，xxx ,

--调用配置算法进行校验检查


 
完成整体配置的

原始标书需求为：

识别后配置需求：

完成配置结果为：



任务规划？  

TODO：显示console版，然后再试文字版---让龙哥搞一下这个？





userInput

一、
标书识别   

  语义理解和意图识别
请按下列要求实现一个BidParser，请调通他：

#一、Prompt模版
假设你是一名标书解析专家，请根据用户的输入{userInput}来解析标书，要求如下：

1、解析要求：
--产品系列仅是例举的清单，清单有{productSerials}，否则输出为空""
--总套数也是有明确要求，否则给出说明totalQuantityMemo（例如：没有明确指定说明，默认值配置1套）
--规格项拆分原则：按分割符拆分
--配置策略，根据用户的诉求推理策略，默认PRICE_MIN_PRIORITY
一
2、输出两种格式，
2.1 输出为格式json 
class ConfigReq{ //配置需求
 String productSerial;//产品系列
 int totalQuantity;//总套数
 List<String> specReqItems;//规格需求项
 ConfigStrategy configStrategy;//配置策略    
 String totalQuantityMemo;//总套数
}

enum ConfigStrategy{
	PRICE_MIN_PRIORITY,//目录价最小优先，默认最新
    TECH_MAX_PRIORITY, //技术最大优先对
}
 

##二、典型输入：
productSerials:
ONU,电脑，服务器，路由器 

userInput:
	我有一名高端客户，需要建立数据中心，要求如下：
	数据中心服务器 500台
	1. 形态与处理器：2U机架式服务器；配置≥2颗最新一代Intel® Xeon® Scalable处理器，每颗核心数≥16核。
	2. 内存：配置≥256GB DDR4 ECC Registered内存，并提供≥16个内存插槽以供扩展。
	3. 存储：配置≥8块2.4TB 10K RPM SAS硬盘；支持硬件RAID 0, 1, 5, 10，缓存≥4GB。

##三计算要求
 

数据中心服务器 10套 
1. 形态与处理器：2U机架式服务器；配置≥2颗最新一代Intel® Xeon® Scalable处理器，每颗核心数≥16核。
2. 内存：配置≥256GB DDR4 ECC Registered内存，并提供≥16个内存插槽以供扩展。
3. 存储：配置≥8块2.4TB 10K RPM SAS硬盘；支持硬件RAID 0, 1, 5, 10，缓存≥4GB。


先调解析？



我有一名高端客户，需要建立数据中心，要求如下：
数据中心服务器 500台
1. 形态与处理器：2U机架式服务器；配置≥2颗最新一代Intel® Xeon® Scalable处理器，每颗核心数≥16核。
2. 内存：配置≥256GB DDR4 ECC Registered内存，并提供≥16个内存插槽以供扩展。
3. 存储：配置≥8块2.4TB 10K RPM SAS硬盘；支持硬件RAID 0, 1, 5, 10，缓存≥4GB。

我有一名高端客户，需要建立数据中心，要求如下：
数据中心服务器 500台
1. CPU:最新一代Intel® Xeon® Scalable处理器，核心数≥16核 
2. 内存：配置≥256GB DDR4 ECC Registered内存，并提供≥16个内存插槽以供扩展。 

      {
        "specName": "CPU:处理器核心数",
        "compare": ">=",
        "specValue": "",
        "unit": "核"
      }

参考testParseProductSpecsByCatalogNodeOneSpec添加针对parseProductSpecs的用例
输入：
  productSerial = "center_server";
  specReqItems=["CPU:最新一代Intel® Xeon® Scalable处理器，核心数≥16核 ","内存：配置≥256GB DDR4 ECC Registered内存，并提供≥16个内存插槽以供扩展"];
在：product-onto-data补充：orgSpecReqToStdSpecReqMap
"CPU:最新一代Intel® Xeon® Scalable处理器，核心数≥16核 "：[      {
        "specName": "CPU:处理器核心数",
        "compare": ">=",
        "specValue": "16",
        "unit": "核"
      }]

String catalogNode，List<String> specReqItems
catalogNode = data_center_server
specReqItems=["内存：配置≥256GB DDR4 ECC Registered内存，并提供≥16个内存插槽以供扩展。"]

{
"productSerials": "服务器",
"totalQuantity": 500,
"totalQuantityMemo": "",
"specReqItems": [
"CPU:最新一代Intel® Xeon® Scalable处理器，核心数≥16核。",
"内存:配置≥128GB DDR1 ECC Registered内存" 
],
"configStrategy": "PRICE_MIN_PRIORITY"
}



 "poweredge_r760xa": {
      "productCode": "poweredge_r760xa",
      "paras": [
        {
          "code": "QTY",
          "type": "输入型",
          "defaultValue": "1",
          "sortNo": 3,
          "options": [],
          "refSpecCode": ""
        },
        {
          "code": "CPU_CONFIG",
          "type": "选择性",
          "defaultValue": "16核",
          "sortNo": 1,
          "options": ["16核", "24核", "32核"],
          "refSpecCode": "CPU:处理器核心数"
        },
        {
          "code": "MEM_CONFIG",
          "type": "选择性",
          "defaultValue": "256GB",
          "sortNo": 2,
          "options": ["256GB", "512GB", "1TB"],
          "refSpecCode": "内存:内存容量"
        }
      ]

 "productCode": "poweredge_r860xa",
      "paras": [
        {
          "code": "QTY",
          "type": "输入型",
          "defaultValue": "1",
          "sortNo": 3,
          "options": [],
          "refSpecCode": ""
        },
        {
          "code": "CPU_CONFIG",
          "type": "选择性",
          "defaultValue": "32核",
          "sortNo": 1,
          "options": ["32核", "48核", "64核"],
          "refSpecCode": "CPU:处理器核心数"
        },
        {
          "code": "MEM_CONFIG",
          "type": "选择性",
          "defaultValue": "512GB",
          "sortNo": 2,
          "options": ["512GB", "1TB", "2TB"],
          "refSpecCode": "内存:内存容量"
        }
      ]

    "data_center_server": [
      {
        "specName": "工作环境:最高工作环境温度",
        "compare": "=",
        "specValue": "",
        "unit": "°C"
      },
      {
        "specName": "CPU:处理器核心数",
        "compare": ">=",
        "specValue": "",
        "unit": "核"
      },
      {
        "specName": "内存:内存容量",
        "compare": ">=",
        "specValue": "",
        "unit": "GB"
      }


1、在appliction.yml增加一个开关

 
}
 

ProductOntoService4Local.parseSpecItemReq 
class ProductSpecificationParserServiceTest {
	mockSpecMatch(String orgSpecDesc,String stdSpecDesc){
	{
		stdSpecDesc-->stdSpec 
		MockDataService.Inst.mockOrgSpecToStdSpec(orgSpecDesc,stdSpec);
	}
    @Test
    void testParseProductSpecsByCatalogNode() {
		....
		mockSpecMatch(“内存:配置≥256GB DDR4 ECC Registered内存”，"""
		[{"specName": "内存:内存容量","compare": ">=","specValue": "256","unit": "°C"}]
		""" 
		...
	}

}


1、增加ProductOntoData增加
//Map<String,List<Specification>>   orgSpecReqToStdSpecReqMap;
 
2、在product-onto-data.json增加  
orgSpecReqToStdSpecReqMap  
  “内存:配置≥256GB DDR4 ECC Registered内存”->{"specName": "内存:内存容量","compare": ">=","specValue": "256","unit": "°C"} 
  
   

电脑的例子：
https://www.dell.com/zh-cn/shop/%E6%88%B4%E5%B0%94%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%94%B5%E8%84%91/dell-16-plus-%E7%AC%94%E8%AE%B0%E6%9C%AC/spd/dell-db16250-laptopI yeah定一个8点半的闹钟。你帮你设置好早上8:30的闹钟，到时会准时提醒你。


https://e.huawei.com/cn/products/optical-terminal/optixstar-p813e-e

参数	华为OptiXstar P813E-E
尺寸（宽×深×高）	220mm x 150mm x 35mm 
重量	约1.2kg
工作环境温度	-40°C to +55°C
工作环境湿度	5% RH to 95% RH (非凝结)
电源适配器额定输入范围	100–240 V AC, 50/60 Hz 
整机供电	56 V DC, 2.6 A
网络侧接口	2*XGS-PON(1*BOB+1*SFP)
用户侧接口	8*GE POE/POE+
静态功耗	10W
最大功耗	14W(POE端口不带受电设备)
138W（POE端口带最大功耗受电设备）
网络侧接口类型	SC/UPC
XGS-PON 接口	• 支持XGS-PON光模块，接口类型：SC/UPC
• 遵循G.9807.1协议
• Class N1/N2
• 接收灵敏度：-28dBm
• 过载光功率：-9dBm
• 传输速率：下行9.953 Gbit/s，上行9.953 Gbit/s
• Type B单归属
• Type B双归属（二层转发模式下支持）
• Type C保护
GE 接口	• 接口类型：RJ-45
• 10/100/1000 Mbit/s接口速率自适应
• MDI/MDIX自动配置
• MAC地址学习数配置
• 基于以太端口的VLAN透传、过滤
最大POE输出功率	总功率130W,每个POE接口最大支持30W
安全	• 802.1x
• IPv6/IPv4防火墙
• MAC过滤/IP地址过滤/URL过滤
• 防DoS攻击/ARP防攻击
• 静态MAC地址绑定
• 设备访问控制
• ONU端口级硬隔离

 2025-11-30：
配置意图的逻辑调通
chekc prompt调通
需求分解的调通 prompt 
系统用例的调通
前端界面调通

结下列的任务：
1、按照P813E来做数据，调通所有的系统用例（对我接口尽量不变了，数据的问题) --龙哥  输出数据有那些问题？
2、前端页面的调通
3、切换公司内部的数据模型 --接口的适配？ --


怎么给领导讲，要思考一下？ ---**
 
 

Parameter请增加一个字段
 String checkRule； 默认是""

请调整sample数据


请参考下列文件来实现parseConfigReq，参考代码如下，
D:\01.code\mygithub\myjavademo\src\main\java\com\example\bidparser

请直接使用这个Prompt  template
D:\01.code\mygithub\myjavademo\src\main\resources\templates\bid-parser.ftl




PCAgentService4Session




参考testParseProductSpecsByCatalogNodeOneSpec添加针对parseProductSpecs的用例
输入：
  productSerial = "center_server";
  specReqItems=["CPU:最新一代Intel® Xeon® Scalable处理器，核心数≥16核 ","内存：配置≥256GB DDR4 ECC Registered内存，并提供≥16个内存插槽以供扩展"];
在：product-onto-data补充：orgSpecReqToStdSpecReqMap
"CPU:最新一代Intel® Xeon® Scalable处理器，核心数≥16核 "：[      {
        "specName": "CPU:处理器核心数",
        "compare": ">=",
        "specValue": "16",
        "unit": "核"
      }]



TODO:
1、可以先做node，如果匹配度满足，不需要再去匹配（目录也有筛选策略）
2、偏离度计算公式待定
3、 	  specName = "最高工作环境温度”; -->specCode
idea： 人的习惯，等等 SpecItemDeviationDegree buildNotFound(orignalSpec,spectName){....} 模糊规格
}
 

4、补充对ProductSpecificationParserService的异常用例

5、补充     SpecItemDeviationDegree calcSpecItemDeviationDegree用例**  非数值型的支持


6、补充系统测试用例？---补充一下
 SampleSystemTest

 P813EE的SystemTest  AcceptTest

7、optionb还是要增加一个ref，规格的值**

8、刷新一下设计文档*

9、ProductConfigService4ParameterIntentTest
    //TODO 待补充其它场景
10.       String response = llmInvoker.callLLMForCheck(prompt); 要整理一下
11. Session 可以测试 


对外需求：
  option是一个对象：

 class Specification 增加字段
    ParameterType type; 默认是 ParameterType.INTEGER




